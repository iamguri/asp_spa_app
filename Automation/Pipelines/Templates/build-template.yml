parameters:
    solution: ""
    config: ""

jobs:
- job:
  displayName: Building SPA App
  steps:

  - checkout: self

  - task: DotNetCoreCli@2
    displayName: "dotnet restore"
    inputs:
        command: restore
        projects: "${{ parameters.solution }}"

  # - task: DotNetCoreCli@2
  #   displayName: "dotnet build"
  #   inputs: 
  #       projects: "${{ parameters.solution }}"
  #       command: build
  #       zipAfterPublish: true
  #       arguments: '--configuration ${{ parameters.config }} --output "$(Build.ArtifactStagingDirectory)/$(Build.BuildId)"'

  - task: MSBuild@1
    inputS:
      solution: "${{ parameters.solution }}"
      msbuildArguments: '-p: PackageLocation="$(Build.ArtifactStagingDirectory)/$(Build.BuildId)"; DeployOnBuild=true; PackageAsSingleFile=true'

  - task: PublishBuildArtifacts@1
    displayName: spa_app
    inputs:
        PathToPublish: $(Build.ArtifactStagingDirectory)
        ArtifactName: spa_app